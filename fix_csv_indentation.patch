--- backend/parsing-service/main.py.original
+++ backend/parsing-service/main.py
@@ -881,14 +881,14 @@
                         flattened_results.append(flat_result)
                     
                     if flattened_results:
-                    # Collect all unique field names from all records
-                    all_fieldnames = set()
-                    for result in flattened_results:
-                        all_fieldnames.update(result.keys())
-                    
-                    # Sort fieldnames for consistent output
-                    sorted_fieldnames = sorted(all_fieldnames)
-                    
-                    writer = csv.DictWriter(output, fieldnames=sorted_fieldnames)
+                        # Collect all unique field names from all records
+                        all_fieldnames = set()
+                        for result in flattened_results:
+                            all_fieldnames.update(result.keys())
+                        
+                        # Sort fieldnames for consistent output
+                        sorted_fieldnames = sorted(all_fieldnames)
+                        
+                        writer = csv.DictWriter(output, fieldnames=sorted_fieldnames)
                         writer.writeheader()
                         writer.writerows(flattened_results) 